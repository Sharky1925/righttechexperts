{% extends "admin/base.html" %}
{% block page_title %}{{ schema.label }}{% endblock %}
{% block content %}
<div class="card border-0 shadow-sm">
  <div class="card-body">
    <form method="post">
      {{ csrf_input() }}
      <div class="row g-3">
        {% for field in schema.fields %}
        <div class="col-12">
          <label class="form-label">{{ field.label }}</label>
          {% if field.type == 'text' %}
          <input type="text" name="{{ field.key }}" class="form-control" value="{{ current_data.get(field.key, '') }}">
          {% elif field.type == 'textarea' %}
          <textarea name="{{ field.key }}" class="form-control" rows="4">{{ current_data.get(field.key, '') }}</textarea>
          {% elif field.type == 'lines' %}
          <textarea name="{{ field.key }}" class="form-control" rows="6">{% if current_data.get(field.key) is iterable and current_data.get(field.key) is not string %}{{ current_data.get(field.key, []) | join('\n') }}{% else %}{{ current_data.get(field.key, '') }}{% endif %}</textarea>
          <small class="text-muted">One item per line.</small>
          {% elif field.type == 'json' %}
          <textarea name="{{ field.key }}" class="form-control font-monospace form-control-mono-sm" rows="8">{{ current_data.get(field.key, []) | tojson(indent=2) }}</textarea>
          {% if field.get('help') %}<small class="text-muted">{{ field.help }}</small>{% endif %}
          {% endif %}
        </div>
        {% endfor %}
        <div class="col-12">
          <button type="submit" class="btn btn-primary">Save Changes</button>
          <a href="{{ url_for('admin.content_list') }}" class="btn btn-outline-secondary ms-2">Back to Content</a>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}
