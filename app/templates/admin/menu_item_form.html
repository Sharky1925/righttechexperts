{% extends "admin/base.html" %}
{% block page_title %}Edit Menu Item{% endblock %}
{% block content %}
<div class="card border-0 shadow-sm">
  <div class="card-body">
    <h5 class="mb-3">Edit Menu Item</h5>
    <form method="post" class="row g-3">
      {{ csrf_input() }}
      <div class="col-md-6">
        <label class="form-label">Label *</label>
        <input type="text" name="label" class="form-control" value="{{ item.label }}" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">Link Type</label>
        <select name="link_type" class="form-select">
          {% for key in ['custom_url', 'route', 'service', 'industry', 'page'] %}
          <option value="{{ key }}" {{ 'selected' if item.link_type == key }}>{{ key.replace('_', ' ')|title }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">Target Slug / Route</label>
        <input type="text" name="target_slug" class="form-control" value="{{ item.target_slug or '' }}">
      </div>
      <div class="col-md-6">
        <label class="form-label">Custom URL</label>
        <input type="text" name="custom_url" class="form-control" value="{{ item.custom_url or '' }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Icon Class</label>
        <input type="text" name="icon_class" class="form-control" value="{{ item.icon_class or '' }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Sort Order</label>
        <input type="number" name="sort_order" class="form-control" value="{{ item.sort_order }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Parent Item</label>
        <select name="parent_id" class="form-select">
          <option value="">— Top Level —</option>
          {% for candidate in parent_candidates %}
          <option value="{{ candidate.id }}" {{ 'selected' if item.parent_id == candidate.id }}>{{ candidate.label }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-6">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="isVisible" name="is_visible" {{ 'checked' if item.is_visible }}>
          <label class="form-check-label" for="isVisible">Visible</label>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="newTab" name="open_in_new_tab" {{ 'checked' if item.open_in_new_tab }}>
          <label class="form-check-label" for="newTab">Open in new tab</label>
        </div>
      </div>
      <div class="col-12 d-flex gap-2">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a href="{{ url_for('admin.menu_editor', location=location) }}" class="btn btn-outline-secondary">Back to Navigation</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
